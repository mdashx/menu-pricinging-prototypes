import{aA as pe,g as ne,p as ae,N as R,l as f,k as be,X as H,O as ge,P as he,R as le,Q as ke,d as ue,e as u,Y as x,L as Ne,V as Q,K as W,af as Pe,U as Se,n as Ve,ao as xe,z as ye,aB as we,c as Ce,s as Me,t as Fe,v as Te,x as De,C as Ie,m as _e,D as $e,E as Ee,F as Be,G as Ae,a as Le,b as Re,aC as Oe,a1 as Z,h as K,a4 as Ue,w as ee,o as z,a3 as He,a7 as Ke,f as ze}from"./index-x0uWx8_N.js";import{V as G}from"./VDataTable-D3gOdQvq.js";import{V as Ge}from"./VForm-Y8zpW2jJ.js";import{q as je,u as Je,e as te,r as Xe}from"./VSelect-DAPLtHuN.js";import{f as Ye}from"./forwardRefs-DdXr6tAt.js";import{d as L}from"./VList-Dtj1b0B-.js";import"./VTable-CzFoqyF_.js";import"./VAvatar-BnXmNYTE.js";const qe=50,Qe=500;function We(t){let{toggleUpDown:p}=t,o=-1,c=-1;pe(d);function b(i){d(),h(i),o=window.setTimeout(()=>{c=window.setInterval(()=>h(i),qe)},Qe)}function d(){window.clearTimeout(o),window.clearInterval(c)}function h(i){p(i==="up")}return{holdStart:b,holdStop:d}}const Ze=ae({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},...Pe(Xe(),["modelValue","validationValue"])},"VNumberInput"),et=ne()({name:"VNumberInput",props:{...Ze()},emits:{"update:modelValue":t=>!0},setup(t,p){let{slots:o}=p;const c=R(),{holdStart:b,holdStop:d}=We({toggleUpDown:O}),h=je(t),i=f(()=>h.isDisabled.value||h.isReadonly.value),{isFocused:S,focus:y,blur:m}=Je(t);function a(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.precision;const g=l==null?String(e):e.toFixed(l);return S.value?Number(g).toString():g}const n=be(t,"modelValue",null,e=>e??null,e=>e==null?e??null:H(Number(e),t.min,t.max)),s=ge(null);he(()=>{S.value&&!i.value||(n.value==null?s.value=null:isNaN(n.value)||(s.value=a(n.value)))});const r=f({get:()=>s.value,set(e){e===null||e===""?(n.value=null,s.value=null):!isNaN(Number(e))&&Number(e)<=t.max&&Number(e)>=t.min&&(n.value=Number(e),s.value=e)}}),N=f(()=>i.value?!1:(n.value??0)+t.step<=t.max),D=f(()=>i.value?!1:(n.value??0)-t.step>=t.min),v=f(()=>t.hideInput?"stacked":t.controlVariant),j=f(()=>v.value==="split"?"$plus":"$collapse"),J=f(()=>v.value==="split"?"$minus":"$expand"),I=f(()=>v.value==="split"?"default":"small"),_=f(()=>v.value==="stacked"?"auto":"100%"),re=f(()=>({props:{onClick:$,onPointerup:E,onPointerdown:Y}})),oe=f(()=>({props:{onClick:$,onPointerup:E,onPointerdown:q}}));le(()=>t.precision,()=>ce()),ke(()=>{U()});function X(e){if(e==null)return 0;const l=e.toString(),g=l.indexOf(".");return~g?l.length-g:0}function O(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(i.value)return;if(n.value==null){r.value=a(H(0,t.min,t.max));return}let l=Math.max(X(n.value),X(t.step));t.precision!=null&&(l=Math.max(l,t.precision)),e?N.value&&(r.value=a(n.value+t.step,l)):D.value&&(r.value=a(n.value-t.step,l))}function ie(e){var w,C,A,M;if(!e.data)return;const l=(w=e.target)==null?void 0:w.value,g=(C=e.target)==null?void 0:C.selectionStart,B=(A=e.target)==null?void 0:A.selectionEnd,V=l?l.slice(0,g)+e.data+l.slice(B):e.data;/^-?(\d+(\.\d*)?|(\.\d+)|\d*|\.)$/.test(V)||e.preventDefault(),t.precision!=null&&(((M=V.split(".")[1])==null?void 0:M.length)>t.precision&&e.preventDefault(),t.precision===0&&V.includes(".")&&e.preventDefault())}async function se(e){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(e.key)||e.ctrlKey||["ArrowDown","ArrowUp"].includes(e.key)&&(e.preventDefault(),U(),await Se(),e.key==="ArrowDown"?O(!1):O())}function $(e){e.stopPropagation()}function E(e){const l=e.currentTarget;l==null||l.releasePointerCapture(e.pointerId),e.preventDefault(),e.stopPropagation(),d()}function Y(e){const l=e.currentTarget;l==null||l.setPointerCapture(e.pointerId),e.preventDefault(),e.stopPropagation(),b("up")}function q(e){const l=e.currentTarget;l==null||l.setPointerCapture(e.pointerId),e.preventDefault(),e.stopPropagation(),b("down")}function U(){if(i.value||!c.value)return;const e=c.value.value;e&&!isNaN(Number(e))?r.value=a(H(Number(e),t.min,t.max)):r.value=null}function ce(){if(!i.value){if(n.value===null||isNaN(n.value)){r.value=null;return}r.value=t.precision==null?String(n.value):n.value.toFixed(t.precision)}}function de(){if(!i.value){if(n.value===null||isNaN(n.value)){r.value=null;return}r.value=n.value.toString()}}function me(){y(),de()}function ve(){m(),U()}return ue(()=>{const{modelValue:e,...l}=te.filterProps(t);function g(){return o.increment?u(W,{key:"increment-defaults",defaults:{VBtn:{disabled:!N.value,flat:!0,height:_.value,size:I.value,icon:j.value}}},{default:()=>[o.increment(re.value)]}):u(Q,{disabled:!N.value,flat:!0,key:"increment-btn",height:_.value,"data-testid":"increment","aria-hidden":"true",icon:j.value,onClick:$,onPointerup:E,onPointerdown:Y,size:I.value,tabindex:"-1"},null)}function B(){return o.decrement?u(W,{key:"decrement-defaults",defaults:{VBtn:{disabled:!D.value,flat:!0,height:_.value,size:I.value,icon:J.value}}},{default:()=>[o.decrement(oe.value)]}):u(Q,{disabled:!D.value,flat:!0,key:"decrement-btn",height:_.value,"data-testid":"decrement","aria-hidden":"true",icon:J.value,size:I.value,tabindex:"-1",onClick:$,onPointerup:E,onPointerdown:q},null)}function V(){return u("div",{class:"v-number-input__control"},[B(),u(L,{vertical:v.value!=="stacked"},null),g()])}function w(){return!t.hideInput&&!t.inset?u(L,{vertical:!0},null):void 0}const C=v.value==="split"?u("div",{class:"v-number-input__control"},[u(L,{vertical:!0},null),g()]):t.reverse||v.value==="hidden"?void 0:u(x,null,[w(),V()]),A=o["append-inner"]||C,M=v.value==="split"?u("div",{class:"v-number-input__control"},[B(),u(L,{vertical:!0},null)]):t.reverse&&v.value!=="hidden"?u(x,null,[V(),w()]):void 0,fe=o["prepend-inner"]||M;return u(te,Ne({ref:c,modelValue:r.value,"onUpdate:modelValue":P=>r.value=P,validationValue:n.value,onBeforeinput:ie,onFocus:me,onBlur:ve,onKeydown:se,class:["v-number-input",{"v-number-input--default":v.value==="default","v-number-input--hide-input":t.hideInput,"v-number-input--inset":t.inset,"v-number-input--reverse":t.reverse,"v-number-input--split":v.value==="split","v-number-input--stacked":v.value==="stacked"},t.class]},l,{style:t.style,inputmode:"decimal"}),{...o,"append-inner":A?function(){var T;for(var P=arguments.length,F=new Array(P),k=0;k<P;k++)F[k]=arguments[k];return u(x,null,[(T=o["append-inner"])==null?void 0:T.call(o,...F),C])}:void 0,"prepend-inner":fe?function(){var T;for(var P=arguments.length,F=new Array(P),k=0;k<P;k++)F[k]=arguments[k];return u(x,null,[M,(T=o["prepend-inner"])==null?void 0:T.call(o,...F)])}:void 0})}),Ye({},c)}}),tt=ae({color:String,...Oe(),...Re(),...Le(),...Ae(),...Be(),...Ee(),...$e(),..._e(),...Ie()},"VSheet"),nt=ne()({name:"VSheet",props:tt(),setup(t,p){let{slots:o}=p;const{themeClasses:c}=Ve(t),{backgroundColorClasses:b,backgroundColorStyles:d}=xe(ye(t,"color")),{borderClasses:h}=we(t),{dimensionStyles:i}=Ce(t),{elevationClasses:S}=Me(t),{locationStyles:y}=Fe(t),{positionClasses:m}=Te(t),{roundedClasses:a}=De(t);return ue(()=>u(t.tag,{class:["v-sheet",c.value,b.value,h.value,S.value,m.value,a.value,t.class],style:[d.value,i.value,y.value,t.style]},o)),{}}}),dt={__name:"index2",setup(t){const p=R([{name:"Material Pre-tax Cost",value:100,key:"pretax"},{name:"Sales Tax",value:1.07,key:"tax"},{name:"Estimated Hours",value:1,key:"est_hours"},{name:"Hourly Labor Fee",value:200,key:"labor_hour_fee"},{name:"Service Tier Scale",value:1,key:"service_scale"},{name:"Hourly Labor Cost",value:30,key:"labor_hour_cost"},{name:"Diagnostic Fee",value:30,key:"diagnostic_fee"}]),o=[{"Markup Scale":"OG From Plumbing Service Spreadsheet","$0.00":4,"$5.00":3.5,"$10.00":3,"$20.00":2.75,"$40.00":2.5,"$60.00":2.25,"$100.00":2,"$150.00":1.75,"$250.00":1.65},{"Markup Scale":"A Flat Scale","$0.00":2.5,"$5.00":2.5,"$10.00":2.5,"$20.00":2.5,"$40.00":2.5,"$60.00":2.5,"$100.00":2.5,"$150.00":2.5,"$250.00":2.5}],c=[{"Service Tier Scale":"Normal From Plumbing Spreadsheet",1:1,2:1.5,3:2,4:2.5,5:3}],b=R({"Material Cost":"","Material Markup":"","Material Fee":"","Labor Fee":"","Total Fee":""}),d=R("");le(p,()=>{b.value["Material Markup"]=i(d,p.value.find(m=>m.key=="pretax"))},{deep:!0});function h(m,a){d.value=a.item,b.value["Material Markup"]=i(d,p.value.find(n=>n.key=="pretax"))}function i(m,a){const n=Object.entries(m.value).filter(([r])=>{const N=r.startsWith("$")?r.slice(1).replace(",",""):null;return!isNaN(parseFloat(N))}).map(([r,N])=>[parseFloat(r.slice(1).replace(",","")),N]);let s=1;for(const r of n)a.value>=r[0]&&(s=r[1]);return s}function S(m){const a={};for(const s of p.value)a[s.key]=s.value;const n=JSON.parse(JSON.stringify(b.value));return console.log(n),n.value["Material Cost"]=a.pretax*a.tax,n.value["Material Fee"]=n.value["Material Cost"]*n.value["Material Markup"]*a.service_scale,n.value["Labor Fee"]=a.est_hours*a.labor_hour_fee*a.service_scale,n.value["Total Fee"]=n.value["Material Fee"]+n.value["Labor Fee"]+a.diagnostic_fee,n}const y=f(()=>{const m=c[0],a=[];for(const[s,r]of Object.entries(m))isNaN(parseFloat(s))||a.push(r);const n=[];for(const s of a)n.push(S());return n});return(m,a)=>(z(),Z(x,null,[u(G,{"hide-default-footer":"",items:o,"onClick:row":h}),K(" "+Ue(d.value)+" ... ",1),u(nt,{class:"mx-auto",width:"300"},{default:ee(()=>[u(Ge,{onSubmit:a[0]||(a[0]=He(()=>{},["prevent"]))},{default:ee(()=>[(z(!0),Z(x,null,Ke(p.value,n=>(z(),ze(et,{key:n.name,modelValue:n.value,"onUpdate:modelValue":s=>n.value=s,reverse:!1,"control-variant":"default",label:n.name,precision:4,"hide-input":!1,inset:!1},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1}),a[1]||(a[1]=K(" ... ")),u(G,{"hide-default-footer":"",items:c}),a[2]||(a[2]=K(" ... ")),u(G,{items:y.value,"hide-default-footer":""},null,8,["items"])],64))}};export{dt as default};
